---
import Aurora from "/AuroraBorealis.jpeg";
import LightColor from "/LightAndColor.jpeg";
import Darial from "/DarialGorge.jpeg";
import RainSteamSpeed from "RainSteamSpeed.jpeg";
import type MainLayout from "../layouts/MainLayout.astro";
---

<div class="mx-6">
  <h1 class="my-12 text-center font-semibold">My Favorite Books:</h1>
  <div class="flex flex-row">
    <div class="books-col">
      <h2 class="col-text">
        Fyodor Dostoyevsky's <span class="italic">Brothers Karamazov</span>
      </h2>
      <h2 class="col-text">
        Dostoyevsky's <span class="italic">Crime and Punishment</span>
      </h2>
      <h2 class="col-text">
        Ayn Rand's <span class="italic">Atlas Shrugged</span>
      </h2>
      <h2 class="col-text">
        Mikhail Bulgakov's <span class="italic">Master and Margarita</span>
      </h2>
      <h2 class="col-text">
        Dostoyevsky's <span class="italic">Demon's</span>
      </h2>
      <h2 class="col-text">
        James Joyce's <span class="italic">Dubliners </span>
      </h2>
    </div>
    <div class="books-col">
      <h2 class="col-text">
        Viktor Frankl's <span class="italic">Man's Search for Meaning</span>
      </h2>
      <h2 class="col-text">
        Herman Melvilles's <span class="italic">Moby Dick</span>
      </h2>
      <h2 class="col-text">
        Dostoyevsky's <span class="italic">Notes from Underground</span>
      </h2>
      <h2 class="col-text">
        George Orwell's <span class="italic">Animal Farm</span>
      </h2>
      <h2 class="col-text">
        Aldous Huxely's <span class="italic">Brave New World</span>
      </h2>
      <h2 class="col-text">
        Conrad's <span class="italic">Heart of Darkness</span>
      </h2>
    </div>
  </div>
</div>

<div class="total">
  <h1 class="font-bold mb-6 mt-12">Papers I've Written:</h1>
  <div class="papers-container">
    <div class="paper-item" data-id="Paper1">
      <h2 class="title">Boulders, Burdens, Mountains, and Meaning</h2>
      <p class="short-desc">Zosima's Happiness in Brothers Karamazov</p>
    </div>
    <div class="paper-item" data-id="Paper2">
      <h2 class="title">Darkness and Despair, Love and Light</h2>
      <p class="short-desc">
        Imagery of Light and Darkness in The Brothers Karamazov
      </p>
    </div>
  </div>

  <div id="popup" class="popup hidden">
    <div class="popup-content">
      <span class="close" id="close-popup">&times;</span>
      <h1 id="popup-title" class="popup-title"></h1>
      <p id="popup-body" class="popup-body"></p>
      <iframe id="popup-frame" class="popup-frame" src="" frameborder="0"
      ></iframe>
    </div>
  </div>
</div>

<script>
  interface Paper {
    title: string;
    description: string;
    file: string;
  }

  const papers: Record<string, Paper> = {
    Paper1: {
      title: "Boulders, Burdens, Mountains, and Meaning",
      description: "Zosima's Happiness in Brothers Karamazov",
      file: "/RUSS 0320 Midterm Paper Cleaned.pdf",
    },
    Paper2: {
      title: "Darkness and Despair, Love and Light",
      description: "Imagery of Light and Darkness in The Brothers Karamazov",
      file: "/RUSS0320A Final Paper.pdf",
    },
  };

  document.querySelectorAll(".paper-item").forEach((item) => {
    item.addEventListener("click", () => {
      const paperId = item.getAttribute("data-id") as keyof typeof papers;
      if (paperId && papers[paperId]) {
        const paper = papers[paperId];
        const popupTitleElement = document.getElementById("popup-title");
        const popupBodyElement = document.getElementById("popup-body");
        const popupFrameElement = document.getElementById("popup-frame");
        const popupElement = document.getElementById("popup");

        if (
          popupTitleElement &&
          popupBodyElement &&
          popupFrameElement &&
          popupElement
        ) {
          popupTitleElement.textContent = paper.title;
          popupBodyElement.textContent = paper.description;
          //popupFrameElement.src = paper.file;
          popupElement.classList.remove("hidden");
          popupElement.style.display = "flex";
        }
      }
    });
  });

  document.getElementById("close-popup")?.addEventListener("click", () => {
    const popupElement = document.getElementById("popup");
    if (popupElement) {
      popupElement.classList.add("hidden");
      popupElement.style.display = "none";
    }
  });
</script>

<style>
  .total {
    display: flex;
    justify-content: center;
    align-items: center;
    flex-direction: column;
    width: 100%;
  }
  .books-col {
    display: flex;
    flex-direction: column;
    align-items: space-between;
    width: 50%;
  }
  .col-text{
    padding: 0.5rem 0rem 0.5rem;
    text-align: center;
  }

  .papers-container {
    display: grid;
    height: fit-content;
    grid-template-columns: repeat(auto-fit, 60vw);
    justify-content: center;
    align-content: center;
    justify-items: center;
    gap: 2em;
    padding: 0em 1em;
    width: 90%;
    color: black;
    margin-bottom: 4em;
  }

  .title {
    text-align: center;
    padding-bottom: 0.3em;
    font-weight: 500;
  }

  .short-desc {
    text-align: center;
  }

  .paper-item {
    display: flex;
    justify-content: center;
    flex-direction: column;
    padding: 1em;
    background-color: #f9f9f9;
    border-radius: 8px;
    cursor: pointer;
    width: 100%;
    height: auto;
  }

  .popup {
    display: none;
    position: fixed;
    top: 25px;
    left: 0;
    width: 100%;
    height: 100%;
    background-color: rgba(0, 0, 0, 0.5);
    justify-content: center;
    align-items: center;
  }

  .popup-content {
    background-color: #fff;
    width: 80%;
    padding: 2rem;
    text-align: left;
    position: relative;
  }

  .popup-title {
    text-align: center;
  }

  .popup-body {
    padding-bottom: 1rem;
  }

  .popup-frame {
    width: 100%;
    height: 80vh;
  }

  .popup.hidden {
    display: none;
  }

  .close {
    position: absolute;
    top: -5px;
    right: 20px;
    cursor: pointer;
    font-size: 2rem;
  }
</style>
